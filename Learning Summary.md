# 입문자를 위한 UE5. Part4 언리얼 엔진 C++

## 없어도 상관없는 폴더

- Binaries : 최종 결과물, 실행 파일
- DerivedCache : 폴더명에서 유츄할 수 있듯이 캐시 파일들이기 때문에 없어도 무방
- Intermediate : 중간 컴파일, 임시 파일들
- Saved : 임시 로그와 스크린샷들
- 위 폴더들을 삭제해도 다시 생성할 수 있으나 시간이 걸림
- uproject → 우클릭 → Generate Visual Studio project files 선택하면 재생성

## 지우면 안되는 폴더

- Config : 언리얼엔진 기본 설정
- Content : 리소스 저장소, 맵, 아트 등등
- Source : 소스 파일들

## 기본 내용

- 기본적으로 C++, C#을 자주 사용하지만 블루프린트를 종종 사용하며, 애니메이션 등을 볼 때는 유용하므로 제3의 언어 느낌으로 사용
- 언리얼 엔진 구조는 유니티와 다르게 좀 더 타이트하게 잡혀있음

## 블루프린트

- 일종의 블럭 코딩
- 블루 프린트도 내부적으로 보면 히든 Actor
  - class LevelBlueprint : public Actor
  - 클래스 내부 함수 구조로 생각하면 편함
- 블루 프린트의 상자(노드) 하나가 함수라고 보면 됨
  - 노드 위치와 관계없이 선(링크)로 연결된 순서대로 실행
  - 선을 누르고 우클릭해서 Break this link 해도 되지만 번거로우니 Alt + 왼쪽 키 누르면 취소됨
- 주석을 남기고 싶으면 단축키 C (Comment)
  - 주석을 남기고 싶은 노드 선택 후 블럭 단위로 남길 수 있음
- 코드 작업 후 컴파일 저장해줄 것
- BeginPlay
  - 블루프린트 시작할 때 딱 한번 실행
- Tick
  - 매번 실행
- 블루 프린트에서 작업하는 변수들은 멤버변수에 가깝다고 볼 것
  - 변수 추가 후 오른쪽 Details 창에서 단일 변수냐 배열이냐, Map이냐를 선택할 수 있음
- Float과 double이 통합되어서 전부 Float 이라 보면 됨
- Name과 String과 Text
  - 언리얼 엔진 내부에서 거의 변하지 않는 것들은 Name으로 해주면 좋음. 리소스 이름 등등 해쉬값을 떠서 빠르게 비교할 수 있는 값들
  - String은 자주 변하는 값들
  - Text는 다국어 시스템으로 변환되는 애들. 가령 UI에서 국가별로 다르게 보여줘야할 때 등등
- getter와 setter
  - 변수를 선택한 상태에서 Ctrl 누른 채로 드래그 앤 드롭하면 getter
  - 변수를 선택한 상태에서 Alt 누른 채로 드래그 앤 드롭하면 setter
- 노드마다 F9를 누르면 Break Point가 걸림
  - VS랑 동일
  - 실행 흐름도 볼 수 있음
- Sequence
  - 실행 순서를 여러번 나눌 수 있음
- 선 정리를 도와주는 플러그인도 있음(유료)
- 블루프린트로 작업할 때는 while문 보다는 foreach를 주로 사용
- 언리얼에서는 가급적 STL과 섞어쓰지 말고 만들어놓은 템플릿 활용할 것


## Unity vs Unreal

- 유니티는 Component 개념으로 부품/레고를 붙이는 방식
  - 스크립트 역시 생성하면 Start()와 Update()가 기본적으로 만들어지는데 언리얼의 BeginPlay와 Tick과 동일
  - 부품을 자유롭게 붙이고 뗄 수 있으니 자유도가 높음
- 언리얼은 상속 개념이 주 핵심
  - 생성한 객체가 기본 상속이 Actor냐 Pawn이냐 등등
  - Actor는 박스처럼 인게임에서 배치만 하고 끝
  - Pawn은 외부 컨트롤러에 의해 조작되는 녀석
  - 따라서 언리얼은 이 기본 개념에 맞추어서 만들어야함


### C++ 클래스

- 언리얼엔진은 상속이 큰 개념/담당
- 인게임에서 레벨에다가 무언가를 배치하고 싶으면 항상 Actor를 상속받은 객체만 가능
  - 그렇다고 Actor가 최상위 부모 객체는 아님(최상위는 Object)
- uproject에서 generate visual project file 실행하면 내부적으로 UBP라는 Tool을 돌려서 파일 생성함.
  - 에디터에서 파일 추가/삭제 했는데도 화면에 보이지 않는다면 작업 돌려볼 것
- Source 폴더 안에 파일 추가/삭제할 것
  - 에디터에서 바로 삭제하기 어렵지만 만들기는 편함
  - Visual Studio 내부에서 파일 추가/삭제한다고 단정짓지 말 것
  - 필터는 의미없고 Source 폴더 안에서 폴더를 만들어서 구조를 만들어야함
  - ctrl + alt + f11
    - 에디터만 킨 상태에서 Visual code 수정했다면 라이브 빌드가 따로 가능함
    - 다만 무슨 일이 일어날지 모르기 때문에 가급적 껐다가 다시 키는걸 추천
- C#의 리플렉션 문법 활용
  - Metadata Specifier
    - UCLASS(), UPROPERTY(), UFUNCTION() 등등
  - 클래스에 UCLASS() 달아주고, 멤버변수에 UPROPERTY() 달어주어서 클래스와 멤버변수라고 언리얼엔진에게 인지시켜주어야 함
  - 이 키워드에 붙어있는 애들만 언리얼에서 인지하고 관찰 대상이 된다고 보면 됨...어휴
  - 언리얼 헤더 Tool이 이런 메타 데이터들 기반으로 동작
  - 블루프린트에서 작업하고 싶다면 이걸 활용해볼걸
    - 예를 들어, UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category=Stat)   
    이 키워드를 멤버 변수 위에다가 붙이기 등등

### 게임 프레임워크

- 유니티는 자유도 높게 만들 수 있지만, 언리얼은 프레임워크가 이미 정해져있음
  - 구조가 이미 잡혀있기 때문에 익숙해지면 개발 속도가 빨라짐
  - Framework Class Relationships
- 디자인 개발 흐름 : 기획 -> 원화 -> 모델러 -> 애니메이션
  - 모델러 결과물 :  Mesh
    - 하나의 모양을 조각상 느낌
    - static mesh : 애니메이션이 들어갈 필요없이 그 자체로 완성인 결과물(배경 등등)
    - 텍스처(Texture)는 하나의 png 이미지 파일이라고 보면 됨
    - 머태리얼(Material) : (mesh가)어떤 색생으로 보여져야 하는지를 설정하는 것으로 재질 등을 포함. 
      - 머태리얼을 여러개 사용하려면 머태리얼 인스턴스화